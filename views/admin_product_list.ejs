<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지 상품 목록</title>
    <link rel="stylesheet" href="/css/style.css">
    <!-- 아이콘 관련 링크 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body>
    <%- include("common/admin_header.ejs") %>
    <div id="admin_prdlist">
        <div class="center">
            <!-- 상품을 등록하는 form태그 구간 -->
            <form class="add_prd" action="/add/prdlist" method="post" enctype="multipart/form-data">
                <div class="line">
                    <label for="category">카테고리</label>
                    <select name="category" id="category">
                        <option value="도넛">도넛</option>
                        <option value="커피">커피</option>
                        <option value="티">티</option>
                        <option value="에이드">에이드</option>
                    </select>
                </div>
                <div class="line">
                    <label for="name">상품명</label>
                    <input type="text" name="name" id="name" placeholder="상품명">
                </div>
                <div class="line">
                    <label for="thumbnail">상품 이미지</label>
                    <input type="file" name="thumbnail" id="thumbnail">
                </div>
                <div class="line">
                    <label for="taste">상품 맛 설명</label>
                    <textarea name="taste" id="taste" placeholder="상품 맛 설명"></textarea>
                </div>
                <div class="line">
                    <label for="price">상품 가격</label>
                    <input type="text" name="price" id="price" placeholder="상품 가격">
                </div>
                <div class="line">
                    <label for="calorie">상품 칼로리 정보</label>
                    <input type="text" name="calorie" id="calorie" placeholder="상품 칼로리 정보">
                </div>
                <div class="line">
                    <label for="nutrition">상품 영양 정보</label>
                    <textarea name="nutrition" id="nutrition">상품 영양 정보</textarea>
                </div>
                <div class="line">
                    <label for="allergy">상품 알레르기 정보</label>
                    <input type="text" name="allergy" id="allergy" placeholder="상품 알레르기 정보">
                </div>
                <div class="line">
                <button type="submit">상품등록</button>
                </div>
            </form>
            <ul class="prdList">
                <li><a href="/admin/prdlist">전체</a></li> 
                <li><a href="/admin/doughnut">도넛</a></li> 
                <li><a href="/admin/coffee">커피</a></li> 
                <li><a href="/admin/tea">티</a></li> 
                <li><a href="/admin/ade">에이드</a></li> 
            </ul>
            <!-- 등록된 상품 목록 전부 보여주는 구간 -->
            <div class="prdwrap">
                <% for(let i = 0; i < prdData.length; i++){ %>
                <div class="list">
                    <h3><%- prdData[i].num %></h3>
                    <p><%- prdData[i].name %></p>
                    <p><%- prdData[i].category %></p>
                    <p><%- prdData[i].taste %></p>
                    <p><%- prdData[i].price %></p>
                    <p><%- prdData[i].calorie %></p>
                    <p><%- prdData[i].nutrition %></p>
                    <p><%- prdData[i].allergy %></p>
                    <img src="/upload/<%- prdData[i].thumbnail %>">
                    <div class="btns">
                        <a class="editBtn" href="#">수정하기</a>
                        <a class="deleteBtn" href="/prdDelete/<%- prdData[i].num %>">삭제하기</a>
                    </div>
                    <!-- 상품을 수정하는 form태그 구간 -->
                    <form class="updateForm" action="/prdUpdate" method="post" enctype="multipart/form-data">
                        <div class="flex_form">
                            <input type="hidden" name="hiddenNo" id="hidden" value="<%- prdData[i].num %>">
                            <select name="categoryUp">
                                <option value="도넛">도넛</option>
                                <option value="커피">커피</option>
                                <option value="티">티</option>
                                <option value="에이드">에이드</option>
                            </select>
                            <label for="name">상품명</label>
                            <input type="text" name="nameUp" id="name" value="<%- prdData[i].name %>">
                            <label for="thumbnail">상품 이미지</label>
                            <input type="hidden" name="originFile" value="<%- prdData[i].thumbnail %>">
                            <input type="file" name="thumbnailUp" id="thumbnail">
                            <label for="taste">상품 맛 설명</label>
                            <textarea name="tasteUp" id="taste"><%- prdData[i].taste %></textarea>
                            <label for="price">상품 가격</label>
                            <input type="text" name="priceUp" id="price" value="<%- prdData[i].price %>">
                            <label for="calorie">상품 칼로리 정보</label>
                            <input type="text" name="calorieUp" id="calorie" value="<%- prdData[i].calorie %>">
                            <label for="nutrition">상품 영양 정보</label>
                            <textarea name="nutritionUp" id="nutrition"><%- prdData[i].nutrition %></textarea>
                            <label for="allergy">상품 알레르기 정보</label>
                            <input type="text" name="allergyUp" id="allergy" value="<%- prdData[i].allergy %>">
                            <button type="submit">상품수정</button>
                            <button class="cancel" type="button">상품수정 취소</button>
                        </div>
                    </form>
                </div>
                <% } %>
            </div>
        </div>
    </div>
    <!-- 수정버튼 관련 스크립트 -->
    <script src="/js/admin_edit.js"></script>
    <!-- 삭제버튼 관련 스크립트 -->
    <script src="/js/deleteBtns.js"></script>
</body>
</html>